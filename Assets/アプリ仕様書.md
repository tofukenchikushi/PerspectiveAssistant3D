# **投影図法作画補助アプリ 仕様書**

## **概要**

このアプリは、投影図法（1点投影、2点投影、3点投影）の学習およびイラスト作成の補助を目的としたツールです。無限に続く地面上で立方体を操作し、視点やオブジェクトの配置をコントロールすることで、投影図法の理解や作画を支援します。

---

## **主な機能**

### **1. 地面描画機能**

- 無限に続く地面を描画する機能。
  - 地面はX軸とY軸に平行な無数の直線で構成されます。
  - 各直線の交差によって正方形が形成されるため、地面全体が正方形のタイルのように見える構造となります。
  - 地平線に近い部分の線を徐々に黒くすることで、地平線（アイレベルとほぼ一致）を強調表示します。
  - 参考手法: [Qiitaの記事](https://qiita.com/yuji_yasuhara/items/158bab01cfff3c39214b)を活用し、正方形のテクスチャを敷き詰める実装を採用。

---

### **2. カメラ操作機能**

- **概要**: キーボードおよびマウスでカメラの位置、視点、および視野角を調整可能。

- **操作方法**:

  - **W/S/A/Dキー**: カメラを前後左右に移動。
  - **Ctrlキー**: カメラを下降。
  - **スペースキー**: カメラを上昇。
  - **マウス移動**: 視点を自由に回転。
  - **マウスホイール**: カメラの視野角を調節。
    - **ホイール上**: 視野角を広げる（ズームアウト）。
    - **ホイール下**: 視野角を狭める（ズームイン）。

- **仕様**:

  - 視野角の変更範囲: 例えば、60°から120°の範囲で調整可能。
  - 初期値: 90°（デフォルトの視野角）。

---

### **3. 立方体操作機能**

#### **立方体の追加**

- **設置ルール**:

  - カメラの視点方向に相対して立方体を設置。
  - 設置位置はカメラから一定の距離（例: 3ユニット）に配置される。
  - 地面より下には立方体を設置できない。
    - 設置位置が地面より下になる場合、立方体の底面が地面にスナップする。
  - 空中への設置を許容。

- **操作方法**:

  - カメラ操作中、**左クリック**で視点方向に立方体を設置する。

#### **プレビュー機能**

- **概要**:
  - カメラ操作中、設置予定の立方体の位置を半透明のプレビューとして視覚的に確認可能。
- **仕様**:
  - 設置予定位置はカメラの視点方向および距離に基づいて計算される。
  - 設置位置が地面より下になる場合、プレビューの立方体は地面にスナップされる。
  - プレビューの透明度や色は、ユーザーが設置予定の立方体を明確に認識できるようにする。

#### **立方体の削除**

- **操作方法**:
  - カメラの視点方向に設置された立方体に視線を合わせ、**右クリック**で立方体を削除する。

#### **立方体の辺の延長線表示機能**

- **概要**:
  - 立方体の各辺に重なる直線を描画し、パースと消失点を視覚的に表示する。
- **仕様**:
  - 各軸（X, Y, Z）に平行な延長線をそれぞれ4本ずつ表示し、3次元方向すべてで12本の直線を描画。
  - 各方向ごとに色分けを実施：
    - X軸方向：赤色
    - Y軸方向：青色
    - Z軸方向：緑色
  - 直線の長さはユーザーの視野に応じて自動的に調整（できるだけ長く）。
  - 表示のオン/オフはLキーで切り替え。

---

### **4. 立方体の配置制限**

- 立方体は以下のルールに基づいて配置：
  - 地面より下に設置することはできない（地面にスナップ）。
  - カメラ視点方向と距離に基づいて配置。

---

## **将来的な拡張**

- **立方体の回転**:

  - 立方体をX軸、Y軸、Z軸方向に回転させる機能を追加する可能性がある。
  - このため、回転状態を保存・処理できるデータ構造と、回転後も整列を維持する計算処理を想定した設計を行う。

- **立方体の大きさの変更**:

  - 立方体の大きさを動的に変更する機能を追加する可能性がある。
  - このため、異なる大きさの立方体を配置・編集できる設計を採用する。

---



## **開発スコープ**

- MVP（Minimum Viable Product）:
  - 地面描画機能
  - カメラ移動および視点回転
  - 視野角の調整
  - 立方体の追加、削除
  - プレビュー機能
  - 立方体の辺の延長線表示機能

---

